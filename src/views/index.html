<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Meu Projeto</title>
    </head>
    <body class="bg-custom-neutral-5 text-custom-text" x-data>
        <header
            class="z-10 w-full px-64 py-4 fixed uppercase flex items-end justify-between"
            x-init="fetch('/header.html').then(res => res.text()).then(html => $el.innerHTML = html)">
        </header>

        <nav id="fixedMenu" class="z-50 w-64 h-16 fixed right-16 top-1/2 bot-1/2 gap-16 uppercase flex flex-col items-center justify-center">
            <div class="w-full flex items-center justify-end">
                <a href="#section1" class="menu-link bg-white w-2 h-2 flex-none rounded-full"></a>
            </div>
            <div class="w-full flex items-center justify-end">
                <a href="#section2" class="menu-link bg-white w-2 h-2 flex-none rounded-full"></a>
            </div>
            <div class="w-full flex items-center justify-end">
                <a href="#section3" class="menu-link bg-white w-2 h-2 flex-none rounded-full"></a>
            </div>
        </nav>

        <div
            id="content"
            class="z-10 w-full px-64 flex flex-col items-center justify-center"
            x-init="fetch('/content.html').then(res => res.text()).then(html => $el.innerHTML = html)">
        </div>

        <footer
            class="z-10 w-full px-64 py-4 flex items-end justify-between"
            x-init="fetch('/footer.html').then(res => res.text()).then(html => $el.innerHTML = html)">
        </footer>

        <script>
            const menuLinks = document.querySelectorAll('.menu-link');

            function highlightCurrentSection() {
                const sections = document.querySelectorAll('section');
                const viewportHeight = window.innerHeight;
                const scrollPosition = window.scrollY;

                sections.forEach((section, index) => {
                    const sectionTop = section.offsetTop;
                    const sectionBottom = sectionTop + viewportHeight;

                    if (scrollPosition >= sectionTop && scrollPosition < sectionBottom) {
                        menuLinks.forEach((link) => link.classList.remove('bg-yellow-400'));
                        menuLinks[index].classList.add('bg-yellow-400');
                    }
                });
            }

            const observer = new MutationObserver(() => {
                highlightCurrentSection();
            });

            observer.observe(document.getElementById('content'), { childList: true, subtree: true });

            window.addEventListener('scroll', highlightCurrentSection);
            window.addEventListener('load', highlightCurrentSection);
        </script>
    </body>
</html>
